<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">

<head>
  <title>Druidcraft - Koinks D&amp;D 2024</title>
  <meta http-equiv="content-type" content="text/html;charset=UTF-8">
  <meta http-equiv="content-language" content="en">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.7.1/jquery.min.js"></script>
  <script type="text/javascript" src="/v--4b961b7cc327/common--bootstrap/3.2.0/bootstrap.min.js"></script>
  <link href="/v--4b961b7cc327/common--fonts/awesome/3.2.1/font-awesome.min.css" rel="stylesheet">
  <link rel="stylesheet" href="/v--4b961b7cc327/common--bootstrap/3.2.0/bootstrap.min.css">
  <link rel="stylesheet" href="/v--4b961b7cc327/common--theme/bootstrap-base/css/style.css">
  <link rel="stylesheet" href="/local--theme/customized-blue-test/style.css">
  <link rel="shortcut icon" href="/local--favicon/favicon.gif">
  <link rel="icon" type="image/gif" href="/local--favicon/favicon.gif">
</head>

<body id="html-body">
  <div id="skrollr-body">
    <div class="container-wrap-wrap">
      <div class="container-wrap">
        <div id="header-placeholder"></div>
        <main class="content-wrap" role="main">
          <div class="container content">
            <div class="row">
              <div class="main-content-wrap col-md-12">
                <div class="main-content">
                  <div class="page-title page-header"><span><a href="/content/spells/spellall">All
                        Spells</a></span></div>
                  <div class="breadcrumbs"><a href="/index">Home</a> &raquo; <a
                      href="/content/spells/spellall">All Spells</a></div>


                  <div id="page-content">

                    <div class="group-list">
                      <h4 id="toc0"><span>Schools of Magic</span></h4>
                      <ul>
                        <li><a href="/content/spells/spellall.html#school:abjuration">Abjuration Spells</a></li>
                        <li><a href="/content/spells/spellall.html#school:conjuration">Conjuration Spells</a></li>
                        <li><a href="/content/spells/spellall.html#school:divination">Divination Spells</a></li>
                        <li><a href="/content/spells/spellall.html#school:enchantment">Enchantment Spells</a></li>
                        <li><a href="/content/spells/spellall.html#school:evocation">Evocation Spells</a></li>
                        <li><a href="/content/spells/spellall.html#school:illusion">Illusion Spells</a></li>
                        <li><a href="/content/spells/spellall.html#school:necromancy">Necromancy Spells</a></li>
                        <li><a href="/content/spells/spellall.html#school:transmutation">Transmutation Spells</a></li>
                      </ul>
                    </div>
                    <div class="group-list">
                      <h4 id="toc0"><span>Class Spell Lists</span></h4>
                      <ul>
                        <li><a href="/content/spells/spellall.html#class:bard">Bard</a></li>
                        <li><a href="/content/spells/spellall.html#class:cleric">Cleric</a></li>
                        <li><a href="/content/spells/spellall.html#class:druid">Druid</a></li>
                        <li><a href="/content/spells/spellall.html#class:paladin">Paladin</a></li>
                        <li><a href="/content/spells/spellall.html#class:ranger">Ranger</a></li>
                        <li><a href="/content/spells/spellall.html#class:sorcerer">Sorcerer</a></li>
                        <li><a href="/content/spells/spellall.html#class:warlock">Warlock</a></li>
                        <li><a href="/content/spells/spellall.html#class:wizard">Wizard</a></li>
                      </ul>
                    </div>

                    <h1>All Spells</h1>

                    <div class="tab-container">
                      <div class="tab-divst" id="tab-divst">
                        <div class="tab-item" data-tab="cantrip">Cantrip</div>
                        <div class="tab-item" data-tab="1st-level">1st Level</div>
                        <div class="tab-item" data-tab="2nd-level">2nd Level</div>
                        <div class="tab-item" data-tab="3rd-level">3rd Level</div>
                        <div class="tab-item" data-tab="4th-level">4th Level</div>
                        <div class="tab-item" data-tab="5th-level">5th Level</div>
                        <div class="tab-item" data-tab="6th-level">6th Level</div>
                        <div class="tab-item" data-tab="7th-level">7th Level</div>
                        <div class="tab-item" data-tab="8th-level">8th Level</div>
                        <div class="tab-item" data-tab="9th-level">9th Level</div>
                      </div>
                      <div class="tab-content-container"></div>
                    </div>

                    <p><em><sup>C</sup></em> - Concentration<br>
                      <em><sup>R</sup></em> - Ritual Spell<br>
                      (C) - Expensive Component<br>
                      (C*) - Expensive Component Consumed
                    </p>
                  </div>


                  <div class="page-info-break"></div>
                  <div class="page-options-container"></div>
                  <div id="action-area" style="display: none;"></div>
                </div>
              </div>
            </div>
          </div>
        </main>

        <footer class="footer-wrap" role="contentinfo">
          <div class="container footer">

            <div class="license-area">Unless otherwise stated, the content of this page is licensed under <a
                rel="license" href="http://creativecommons.org/licenses/by-sa/3.0/">Creative Commons
                Attribution-ShareAlike 3.0 License</a></div>
          </div>
          </footer>
      </div>
      <script>
        $().ready(function() {
          $('#header-placeholder').load('/header.html', () => {
            $('.dropdown-toggle').on('click', e => {
              if ($(window).width() <= 768) $(e.target).next().toggleClass('open');
            });
          });
        });
      </script>
      <script>
        $(document).ready(function() {
          const tabList = document.querySelector(".tab-list");
          const contentContainer = document.querySelector(".tab-content-container");

          function getFilterFromURL() {
            const hash = window.location.hash.substring(1);
            if (!hash) return null;
            const [key, value] = hash.split(":");
            return key && value ? { key, value: value.toLowerCase() } : null;
          }

          function activateTab(tabId) {
            document.querySelectorAll(".tab-item, .tab-content").forEach(tab => {
              tab.classList.remove("active");
            });
            document.querySelector(`.tab-item[data-tab="${tabId}"]`).classList.add("active");
            document.getElementById(tabId).classList.add("active");
          }


          function fetchAndFilterSpells() {
            fetch("/content/spells/spell-content.html")
              .then(response => response.text())
              .then(data => {
                const tempDiv = document.createElement("div");
                tempDiv.innerHTML = data;

                const tables = tempDiv.querySelectorAll(".tab-content");
                const contentContainer = document.querySelector(".tab-content-container");
                const tabs = document.querySelectorAll(".tab-item");
                const filter = getFilterFromURL();
                let firstVisibleTab = null;

                // Clear previous content
                contentContainer.innerHTML = "";

                tables.forEach((table, index) => {
                  const tableHeader = Array.from(table.querySelectorAll("tr"))[0].outerHTML;
                  const rows = Array.from(table.querySelectorAll("tr")).slice(1); // Ignore header
                  let filteredRows = rows;

                  if (filter) {
                    const { key, value } = filter;
                    filteredRows = rows.filter(row => {
                      const cells = row.getElementsByTagName("td");
                      if (key === "class") {
                        return cells[2]?.textContent.toLowerCase().includes(value);
                      } else if (key === "school") {
                        return cells[1]?.textContent.toLowerCase().includes(value);
                      }
                      return true;
                    });
                  }

                  // Clear and add filtered rows
                  table.innerHTML = tableHeader;
                  filteredRows.forEach(row => table.appendChild(row));

                  // Append the table into the content container
                  contentContainer.appendChild(table);

                  // Find corresponding tab by matching `data-tab`
                  const tab = document.querySelector(`.tab-item[data-tab="${table.id}"]`);

                  // Hide tab if empty
                  if (filteredRows.length === 0) {
                    tab?.classList.add("hidden");
                    tab?.classList.remove("active");
                    table.style.display = "none";
                  } else {
                    tab?.classList.remove("hidden");
                    table.style.display = "block";
                    if (!firstVisibleTab) {
                      firstVisibleTab = tab;
                    }
                  }
                });

                activateTab(document.querySelector(".tab-item.active")?.dataset?.tab ?? firstVisibleTab.dataset.tab);
              });
          }

          // Fetch and filter spells on page load
          fetchAndFilterSpells();

          // Fetch and filter spells dynamically when URL hash changes
          window.addEventListener("hashchange", fetchAndFilterSpells);

          // Event Listener for Tab Clicks
          document.querySelectorAll(".tab-item").forEach(tab => {
            tab.addEventListener("click", function () {
              activateTab(tab.dataset.tab);
            });
          });
        });
      </script>
</body>

</html>